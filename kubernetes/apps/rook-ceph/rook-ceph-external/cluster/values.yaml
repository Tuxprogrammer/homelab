---
dataDirHostPath: /var/lib/rook-external

# Create an external cluster
cephClusterSpec:
  external:
    enable: true
  crashCollector:
    disable: true
  healthCheck:
    daemonHealth:
      mon:
        disabled: false
        interval: 45s

# Turn on monitoring
monitoring:
  enabled: true
  rulesNamespaceOverride: rook-ceph-external
  externalMgrEndpoints:
    - ip: "${MONITORING_ENDPOINT}"
  externalMgrPrometheusPort: 9283

# Run the ceph-toolbox pod
toolbox:
  enabled: true

# Create a ceph-block-external storageclass and CephBlock object
cephBlockPools:
  - name: ceph-k8s
    spec:
      failureDomain: host
      replicated:
        size: 3
    storageClass:
      enabled: true
      name: ceph-block-ext
      isDefault: false
      reclaimPolicy: Delete
      allowVolumeExpansion: true
      parameters:
        imageFormat: "2"
        imageFeatures: layering
        csi.storage.k8s.io/provisioner-secret-name: rook-csi-rbd-provisioner
        csi.storage.k8s.io/provisioner-secret-namespace: rook-ceph-external
        csi.storage.k8s.io/controller-expand-secret-name: rook-csi-rbd-provisioner
        csi.storage.k8s.io/controller-expand-secret-namespace: rook-ceph-external
        csi.storage.k8s.io/node-stage-secret-name: rook-csi-rbd-node
        csi.storage.k8s.io/node-stage-secret-namespace: rook-ceph-external
        csi.storage.k8s.io/fstype: ext4

cephFileSystems:
### CANNOT ADD ANY CEPHFILESYSTEMS IN THIS HELM CHART. STORAGE CLASS WILL BE ADDED INSTEAD. ###

cephObjectStores:
  - name: ceph-objectstore-ext
    storageClass:
      enabled: true
      name: ceph-bucket-ext
      reclaimPolicy: Delete
      parameters:
        region: us-east-1
    spec:
      metadataPool:
        failureDomain: host
        replicated:
          size: 3
      dataPool:
        failureDomain: host
        erasureCoded:
          dataChunks: 2
          codingChunks: 1
      preservePoolsOnDelete: true
      gateway:
        port: 80
        resources:
          limits:
            cpu: "2000m"
            memory: "2Gi"
          requests:
            cpu: "1000m"
            memory: "1Gi"
        # securePort: 443
        # sslCertificateRef:
        instances: 1
        priorityClassName: system-cluster-critical
